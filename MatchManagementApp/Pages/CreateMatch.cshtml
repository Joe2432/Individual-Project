@page
@model MatchManagementApp.UI.Pages.CreateMatchModel
@{
    ViewData["Title"] = "Create Match";
}

@section Styles {
    <link rel="stylesheet" href="~/css/create-match.css" />
}

<div class="container mt-4">
    <div class="card shadow-sm">
        <div class="card-header bg-primary text-white">
            <h5 class="mb-0">Create Match</h5>
        </div>
        <div class="card-body overflow-auto">
            <form method="post" id="createMatchForm" class="row gy-3 gx-3 align-items-end flex-nowrap flex-md-wrap">

                <div asp-validation-summary="All" class="text-danger w-100 mb-3"></div>

                <div class="col-auto">
                    <label asp-for="Match.MatchType" class="form-label mb-1">Type</label>
                    <select asp-for="Match.MatchType" class="form-select" id="matchTypeSelect" required>
                        <option value="">Select</option>
                        <option>Singles</option>
                        <option>Doubles</option>
                    </select>
                </div>

                <div class="col-auto" id="partnerDiv">
                    <label asp-for="Match.PartnerName" class="form-label mb-1">Partner</label>
                    <input asp-for="Match.PartnerName" class="form-control" />
                </div>

                <div class="col-auto">
                    <label asp-for="Match.FirstOpponentName" class="form-label mb-1">Opponent 1</label>
                    <input asp-for="Match.FirstOpponentName" class="form-control" required />
                </div>

                <div class="col-auto" id="secondOpponentDiv">
                    <label asp-for="Match.SecondOpponentName" class="form-label mb-1">Opponent 2</label>
                    <input asp-for="Match.SecondOpponentName" class="form-control" />
                </div>

                <div class="col-auto">
                    <label asp-for="Match.NrSets" class="form-label mb-1">Sets</label>
                    <select asp-for="Match.NrSets" class="form-select" required>
                        <option value="">Select</option>
                        <option>3</option>
                        <option>5</option>
                    </select>
                </div>

                <div class="col-auto">
                    <label asp-for="Match.FinalSetType" class="form-label mb-1">Final Set</label>
                    <select asp-for="Match.FinalSetType" class="form-select" required>
                        <option value="">Select</option>
                        <option>Maxi Tiebreak</option>
                        <option>Normal Set</option>
                    </select>
                </div>

                <div class="col-auto">
                    <label asp-for="Match.GameFormat" class="form-label mb-1">Format</label>
                    <select asp-for="Match.GameFormat" class="form-select" required>
                        <option value="">Select</option>
                        <option>With Advantage</option>
                        <option>NoAd</option>
                    </select>
                </div>

                <div class="col-auto">
                    <label asp-for="Match.Surface" class="form-label mb-1">Surface</label>
                    <select asp-for="Match.Surface" class="form-select" required>
                        <option value="">Select</option>
                        <option>Hard</option>
                        <option>Clay</option>
                        <option>Grass</option>
                    </select>
                </div>

                <div class="col-auto">
                    <button type="submit" class="btn btn-success px-4">Create Match</button>
                </div>

            </form>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const matchType = document.getElementById("matchTypeSelect");
            const partnerDiv = document.getElementById("partnerDiv");
            const secondOpponentDiv = document.getElementById("secondOpponentDiv");

            function toggleDoublesFields() {
                const isDoubles = matchType.value === "Doubles";
                partnerDiv.style.display = isDoubles ? "block" : "none";
                secondOpponentDiv.style.display = isDoubles ? "block" : "none";
            }

            matchType.addEventListener("change", toggleDoublesFields);
            toggleDoublesFields();
        });
    </script>
}
